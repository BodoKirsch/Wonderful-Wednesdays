---
title: "Example meta-analysis dataset"
output: github_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Background

The example simulated data set is based on seven phase III studies in Hypertension. The objective of the studies were to compare the use of intensive hypertensive medicences compared to standard of care to control blood pressure. The studies are inspired by the large blood pressure intervention studies such as [SPRINT](https://biolincc.nhlbi.nih.gov/studies/sprint/). In this case, instead of a large single trial, we are faced with an integreted set of seven seperate trials.  

## The data set and variable definitions

The data set is an abridged version of [CDISC ADaM](https://www.cdisc.org/standards/foundational/adam). 

The data set contains the following variables: 

* **STUDYID**	Masked study identifer	
* **USUBJD**	Masked subject identifier	Identifer
* **TRT01P**	Randomised treatment
* **AVAL**	Mean systolic blood pressure (mm Hg) measured at 1-Year	
* **CHG**	 Change from baseline mean systolic blood pressure (SBP) [mm Hg] at 1-Year	
* **PCHG**	Percentage change from baseline mean systolic blood pressure (%change) at 1-year
* **AVALCAT1**	Responder analysis - patients with controlled SBP at 1-Year (<=120 mmHg) 1 = Yes, 0 = No	1-Year

A wide collection of baseline measurements are also included which can be explored to for subgroups or differential treatment effects. For a detailed overview of the data set, please refer to the [data dictionary here](DataDictionaryDec2020.xlsx)

## Example analysis



## Load data

```{r, warning=FALSE, message=FALSE}
library(tidyverse)    
library(broom)
data <- read_csv("BIG_DATA_PSI_WW_DEC2020.csv")
```

## Plot pooled data
```{r, warning=FALSE, message=FALSE}
data %>% ggplot(aes(x = BASE, y = AVAL)) +
  geom_point()
```

## Simple analysis by study

```{r, warning=FALSE, message=FALSE}
data %>% 
  group_by(STUDYID) %>%
  do(fit = tidy(lm(AVAL ~ BASE + TRT01PN, data = .))) %>% 
  unnest(fit) %>%
  filter(term == "TRT01PN")
```

