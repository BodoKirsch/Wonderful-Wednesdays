Example meta-analysis dataset
================

## Background

The example simulated data set is based on

## The data set and variable definitions

The data set is an abridged version of the [CDISC
ADaM](https://www.cdisc.org/standards/foundational/adam)
[ADTTE](https://www.cdisc.org/system/files/all/standard_category/application/pdf/adam_tte_final_v1.pdf)
time to event data set.

The data set contains the following variables:

  - STUDYID - the study identifier
  - SUBJID - subject identifier
  - USUBJID - unique subject iddentifier
  - AGE - age at randomisation (years)
  - STR01 - Hormone receptor status at randomisation
  - STR01N - Hormone receptor positive (Numeric)
  - STR01L - Hormone receptor positive (Long format)
  - STR02 - Prior Radiotherapy at randomisation
  - STR02N - Prior Radiotherapy at randomisation (Numeric)
  - STR02L - Prior Radiotherapy at randomisation (Long format)
  - TRT01P - Planned treatment assigned at randomisation
  - TRT01PN - Planned treatment assigned at randomisation (Numeric)
  - PARAM - Analysis parameter - Progression free survival
  - PARAMCD - Analysis parameter code
  - AVAL - Analysis value (time to event \[days\])
  - CNSR - Censoring (0 = Event, 1 = censored)
  - EVNTDESC - Event description
  - CNSDTDSC - Censoring description
  - DCTREAS - Discontinuation from study reason

A number of baseline measurements are also included such as age, hormone
receptor status and prior radiotherapy treatment. Additional details on
reasons for study discontinuation and censoring event description are
also included.

## Example analysis

``` r
library(tidyverse)    
library(broom)

## load data
data <- read_csv("BIG_DATA_PSI_WW_DEC2020.csv")
data %>% glimpse()
```

    ## Rows: 6,854
    ## Columns: 55
    ## $ STUDYID   <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
    ## $ USUBJD    <dbl> 10001, 10002, 10003, 10004, 10005, 10006, 10007, 10008, 1...
    ## $ TRT01P    <chr> "INT", "INT", "INT", "INT", "INT", "INT", "INT", "INT", "...
    ## $ TRT01PN   <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
    ## $ TRT01PC   <chr> "Standard of care", "Standard of care", "Standard of care...
    ## $ PARAM     <chr> "Mean systolic blood pressure (mm Hg) at 1-year", "Mean s...
    ## $ AVAL      <dbl> 117.9712, 117.3558, 116.8942, 116.4327, 115.3558, 114.894...
    ## $ BASE      <dbl> 130.3077, 130.4615, 130.5385, 130.6154, 130.8462, 131.000...
    ## $ CHG       <dbl> -12.3365, -13.1057, -13.6443, -14.1827, -15.4904, -16.105...
    ## $ PCHG      <dbl> -9.467207, -10.045646, -10.452319, -10.858367, -11.838632...
    ## $ AVALCAT1  <chr> "<= 120 mm Hg", "<= 120 mm Hg", "<= 120 mm Hg", "<= 120 m...
    ## $ AVALCAT1N <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, ...
    ## $ AVALCAT2  <chr> "<= 132 mm Hg", "<= 132 mm Hg", "<= 132 mm Hg", "<= 132 m...
    ## $ AVALCAT2N <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
    ## $ COUNTRY   <chr> "ARG", "ARG", "ARG", "ARG", "ARG", "ARG", "ARG", "ARG", "...
    ## $ SEX       <chr> "M", "M", "M", "M", "M", "M", "M", "M", "M", "M", "M", "M...
    ## $ ETHNIC    <chr> "HISPANIC OR LATINO", "HISPANIC OR LATINO", "HISPANIC OR ...
    ## $ RACE      <chr> "CAUCASIAN", "NATIVE AMERICAN", "CAUCASIAN", "CAUCASIAN",...
    ## $ HEIGHT    <dbl> 176.0, 167.0, 165.0, 174.0, 178.0, 181.0, 172.0, 175.0, 1...
    ## $ WEIGHT    <dbl> 73.0000, 82.8000, 60.2000, 81.7000, 90.7000, 112.2000, 94...
    ## $ BMI       <dbl> 23.57, 29.69, 22.11, 26.99, 28.63, 34.25, 31.94, 17.14, 3...
    ## $ AGE       <dbl> 26, 43, 30, 50, 50, 40, 62, 28, 43, 41, 68, 73, 57, 52, 5...
    ## $ SBPCAT1N  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
    ## $ SBPCAT1C  <chr> "<= 132 mm Hg", "<= 132 mm Hg", "<= 132 mm Hg", "<= 132 m...
    ## $ AGECAT1   <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F...
    ## $ AGECAT1N  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
    ## $ AGECAT1C  <chr> "< 75", "< 75", "< 75", "< 75", "< 75", "< 75", "< 75", "...
    ## $ CHD10R1   <chr> "Low (<10%)", "Low (<10%)", "Low (<10%)", "Low (<10%)", "...
    ## $ CHD10R1N  <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 3, 1, 1, 1, 1, 2, 1, ...
    ## $ ALBSI     <dbl> 51, 47, 40, 41, 45, 44, 44, 44, 44, 42, 41, 41, 45, 42, 4...
    ## $ BASOSI    <dbl> 0.01, 0.01, 0.01, 0.02, 0.03, 0.02, 0.03, 0.01, 0.02, 0.0...
    ## $ BICARSI   <dbl> 23, 25, 22, 26, 21, 24, 27, 23, 24, 21, 25, 23, 28, 24, 2...
    ## $ BILISI    <dbl> 14, 10, 10, 7, 26, 7, 7, 3, 5, 7, 12, 3, 3, 5, 9, 3, 10, ...
    ## $ BUNSI     <dbl> 5.71, 4.64, 5.36, 4.64, 5.71, 4.28, 6.78, 7.14, 3.21, 4.2...
    ## $ CASI      <dbl> 2.37, 2.20, 2.25, 2.25, 2.27, 2.17, 2.27, 2.40, 2.30, 2.3...
    ## $ CHOL_HDL  <dbl> 3.97, 2.99, 2.16, 2.13, 4.74, 4.25, 3.10, 3.13, 5.00, 3.6...
    ## $ CHOLSI    <dbl> 4.01, 3.80, 2.79, 3.41, 5.40, 4.29, 4.16, 3.41, 4.55, 4.4...
    ## $ CREATSI   <dbl> 79, 65, 61, 57, 77, 84, 94, 73, 67, 78, 104, 103, 86, 84,...
    ## $ EOSLESI   <dbl> 2, 2, 3, 2, 2, 4, 1, 5, 2, 1, 2, 4, 16, 2, 2, 1, 6, 0, 2,...
    ## $ EOSSI     <dbl> 0.12, 0.11, 0.18, 0.14, 0.11, 0.29, 0.13, 0.46, 0.14, 0.0...
    ## $ GGTSI     <dbl> 23, 36, 15, 21, 31, 71, 31, 12, 23, 58, 43, 20, 21, 67, 3...
    ## $ GLUCPSI   <dbl> 5.38, 5.61, 5.00, 5.27, 6.00, 7.16, 4.88, 4.77, 4.88, 4.5...
    ## $ HCT       <dbl> 0.46, 0.44, 0.43, 0.43, 0.42, 0.44, 0.42, 0.38, 0.43, 0.4...
    ## $ HDLSI     <dbl> 1.01, 1.27, 1.29, 1.60, 1.14, 1.01, 1.34, 1.09, 0.91, 1.2...
    ## $ HDT       <dbl> 1.19, 0.90, 0.97, 1.16, 0.87, 0.87, 1.13, 1.26, 0.97, 1.1...
    ## $ HGBSI     <dbl> 150, 139, 146, 145, 138, 144, 134, 123, 142, 137, 136, 14...
    ## $ KSI       <dbl> 4.6, 4.7, 4.2, 4.6, 4.3, 4.4, 4.0, 4.8, 4.2, 4.6, 4.6, 4....
    ## $ LDLSI     <dbl> 2.90, 2.30, 1.58, 1.58, 4.06, 2.90, 2.33, 2.17, 2.72, 2.8...
    ## $ LPASI     <dbl> 0.17, 0.45, 0.17, 1.11, 0.59, 0.18, 0.19, 0.17, 0.17, 0.5...
    ## $ LYMLESI   <dbl> 20, 21, 18, 28, 21, 16, 18, 23, 19, 22, 28, 28, 34, 28, 3...
    ## $ LYMSI     <dbl> 1.30, 1.27, 1.20, 2.12, 1.30, 1.17, 1.69, 2.21, 1.36, 2.4...
    ## $ MONOLSI   <dbl> 4, 3, 5, 5, 3, 3, 4, 3, 3, 2, 4, 4, 3, 3, 3, 4, 6, 3, 2, ...
    ## $ TRIGFSI   <dbl> 0.68, 0.91, 0.52, 0.72, 1.84, 1.61, 2.03, 0.73, 3.32, 1.0...
    ## $ URATESI   <dbl> 410, 262, 232, 250, 422, 416, 428, 256, 363, 303, 553, 47...
    ## $ WBCSI     <dbl> 6.4, 6.0, 6.8, 7.7, 6.3, 7.5, 9.6, 9.8, 7.1, 11.1, 8.4, 7...

## Plot pooled data

``` r
data %>% ggplot(aes(x = BASE, y = AVAL)) +
  geom_point()
```

![](Readme_files/figure-gfm/unnamed-chunk-2-1.png)<!-- -->

## Analysis by study

``` r
results <- 
  data %>% 
  group_by(STUDYID) %>%
  do(fitHour = tidy(lm(AVAL ~ BASE + TRT01PN, data = .))) %>% 
  unnest(fitHour) %>%
  filter(term == "TRT01PN")

results
```

    ## # A tibble: 7 x 6
    ##   STUDYID term    estimate std.error statistic  p.value
    ##     <dbl> <chr>      <dbl>     <dbl>     <dbl>    <dbl>
    ## 1       1 TRT01PN    -7.12     0.480     -14.8 5.14e-44
    ## 2       2 TRT01PN    -8.17     0.694     -11.8 1.60e-28
    ## 3       3 TRT01PN   -10.1      0.508     -19.8 5.97e-73
    ## 4       4 TRT01PN    -7.27     0.476     -15.3 3.18e-48
    ## 5       5 TRT01PN    -6.97     0.665     -10.5 1.57e-23
    ## 6       6 TRT01PN    -6.80     0.358     -19.0 4.40e-74
    ## 7       7 TRT01PN    -7.74     0.621     -12.5 2.48e-32
